!function(e){"function"==typeof define&&define.amd?define(["fs"],e):e()}((function(){"use strict";class e{static i=1;static o=2;static u=3;static p=4;static g=5;static $=6;static R=7;static T=8;static k=9;static I=10;static P=11;static S=12;static _=13;static A=14;static O=15;static U=16;constructor(e,t,n,r){this.type=e,this.name=t,this.value=n,this.position=r}}class t{static N=18;static PI=new t("3.141592653589793238");static#e=BigInt("1"+"0".repeat(t.N));static#t=new RegExp("\\.?0+$");#n;constructor(e=0){let n,r;e instanceof t?this.#n=e.#n:e instanceof BigInt?this.#n=value*t.M:([n,r]=(e+".").split("."),this.#n=BigInt(n+r.substr(0,t.N).padEnd(t.N,"0")),r.charCodeAt(t.N)>52&&this.#n++)}#r(e){let n;return n=new t(this),n.#n=e,n}#i(e,t){return this.#r(e/t+2n*e/t%2n)}add(e){return this.#r(this.#n+new t(e).#n)}Y(e){return this.#r(this.#n-new t(e).#n)}D(e){return this.#i(this.#n*new t(e).#n,t.#e)}L(e){return this.#i(this.#n*t.#e,new t(e).#n)}equals(e){return this.valueOf()==e}valueOf(){return this.#n}C(){return+this.toString()}toString(e=t.N){let n;return n=this.#i(this.#n,BigInt("1"+"0".repeat(e>-1?Math.max(t.N-e,0):t.N))).#n.toString().padStart(e+1,"0"),n.substr(0,n.length-e)+("."+n.substr(-e)).replace(t.#t,"")}}class n{static B=1;static F=2;static X=3;static G=4;static W=5;static V(){return{stack:[],H:[],j:null,pending:0,x:new t(0),y:new t(0),K:!1,Z:null,J:new t(0),ee:new t(0)}}}class r{static#a=[{type:e.i,te:new RegExp("^[0-9]*\\.?[0-9]+",""),ne:e=>new t(e)},{type:e.o,te:new RegExp("^[achlmqstvz](?![a-z_$])","i"),ne:e=>({a:[n.B,n.F,n.X,n.G,n.G,n.B,n.F],c:[n.B,n.F,n.B,n.F,n.B,n.F],h:[n.B],l:[n.B,n.F],m:[n.B,n.F],q:[n.B,n.F,n.B,n.F],s:[n.B,n.F,n.B,n.F],t:[n.B,n.F],v:[n.F],z:[]}[e.toLowerCase()])},{type:e.u,te:new RegExp("^,+",""),ne:()=>null},{type:e.p,te:new RegExp("^\\s+",""),ne:()=>null},{type:e.g,te:new RegExp("^[a-z_$][a-z0-9_$]*","i"),ne:e=>e},{type:e.$,te:new RegExp("^[()]",""),ne:e=>"("===e},{type:e.T,te:new RegExp("^\\+",""),ne:e=>e},{type:e.I,te:new RegExp("^\\*",""),ne:e=>e},{type:e.k,te:new RegExp("^-",""),ne:e=>e},{type:e.P,te:new RegExp("^/",""),ne:e=>e},{type:e.S,te:new RegExp("^%",""),ne:e=>e},{type:e._,te:new RegExp("^@",""),ne:e=>e},{type:e.A,te:new RegExp("^\\|",""),ne:e=>e},{type:e.O,te:new RegExp("^=",""),ne:e=>e},{type:e.U,te:new RegExp("^#",""),ne:e=>e}];#s=null;#o=0;constructor(t){var n,i,a,s;for(this.#s=[],i=0;t.length;){for(n=0;n<r.#a.length;n++)if(a=(s=r.#a[n]).te.exec(t)){this.#s.push(new e(s.type,a[0],s.ne(a[0]),i)),i+=a[0].length,t=t.substr(a[0].length);break}if(n===r.#a.length)throw new SyntaxError(`Unexpected symbol "${t.substr(0,1)}" at column ${i}`)}this.#s.push(new e(e.R,null,null,i))}re(){return this.#s[this.#o]??null}ie(){return this.#o++,this.re()}ae(){return this.#s[this.#o+1]??null}reset(){return this.#o=0,this.re()}}class i{static#c=1;static#l=2;static#h=3;static#u=4;static#w=5;constructor(e){this.stream=e,this.debug=!1}static#p(e){return e.value+" "+["","=","+","-","*","/"][e.se]}static#f(e,t){var n,r,a;for(n=e.stack.length-1;n>-1&&e.stack[n].se>t;)n--;if((r=n+1)<e.stack.length){for(e.stack.push({se:i.#c,value:e.accumulator}),this.debug&&console.log("<<\n"+e.stack.slice(r).map(((e,t)=>t+": "+i.#p(e))).join("\n")),a=e.stack[r].value;r<e.stack.length-1;r++)switch(e.stack[r].se){case i.#u:a=a.D(e.stack[r+1].value);break;case i.#w:a=a.L(e.stack[r+1].value);break;case i.#l:a=a.add(e.stack[r+1].value);break;case i.#h:a=a.Y(e.stack[r+1].value)}e.accumulator=a,e.stack=e.stack.slice(0,n+1)}}parse(r,a=0,s={},o=!1,c,l){var h,u;for(h={accumulator:new t(0),oe:0,ce:a,data:0,stack:[]},u={le:this.stream.re(),he:!0};u.he&&u.le;){switch(u.le.type){case e.i:if(h.data===e.p)throw new SyntaxError(`Unexpected space-delimited value "${u.le.name}" at column ${u.le.position}`);if(h.data===e.i){if(h.ce)throw new SyntaxError(`Unexpected token "${u.le.name}" at column ${u.le.position}`);u.he=!1;continue}this.debug&&console.log("Number",u.le),h.accumulator=u.le.value,h.data=e.i;break;case e.P:if(h.data!==e.i&&h.data!==e.p)throw new SyntaxError(`Unexpected token "${u.le.name}" at column ${u.le.position}`);this.debug&&console.log("/",u.le),h.stack.push({se:i.#w,value:h.accumulator}),h.data=e.P;break;case e.I:if(h.data!==e.i&&h.data!==e.p)throw new SyntaxError(`Unexpected token "${u.le.name}" at column ${u.le.position}`);this.debug&&console.log("*",u.le),h.stack.push({se:i.#u,value:h.accumulator}),h.data=e.I;break;case e.k:if(h.data===e.i&&0===h.ce){u.he=!1;continue}if(h.data!==e.i&&0!==h.data&&h.data!==e.$&&h.data!==e.p)throw new SyntaxError(`Unexpected token "${u.le.name}" at column ${u.le.position}`);this.debug&&console.log("-",u.le),i.#f(h,i.#h),h.stack.push({se:i.#h,value:h.accumulator}),h.data=e.k;break;case e.T:if(h.data!==e.i&&h.data!==e.p)throw new SyntaxError(`Unexpected token "${u.le.name}" at column ${u.le.position}`);this.debug&&console.log("+",u.le),i.#f(h,i.#h),h.stack.push({se:i.#l,value:h.accumulator}),h.data=e.T;break;case e.A:if(h.data===e.p)throw new SyntaxError(`Unexpected space before measure operator ("${u.le.name}") at column ${u.le.position}`);if(h.data===e.i&&(this.debug&&console.log("*",u.le),h.stack.push({se:i.#u,value:h.accumulator})),l===n.W)throw new SyntaxError("The unit type is incompatible with the return value of a segment measurement");if(l===n.G)throw new SyntaxError("The flag type is incompatible with the return value of a segment measurement");if(this.stream.ie(),this.stream.re().type===e.p&&this.stream.ie(),this.stream.re().type!==e.g)throw new SyntaxError(`Expected identifier at ${this.stream.re().position}, found "${this.stream.re().name}"`);let a=n.V();switch(a.x=c.x,a.y=c.y,a.j=[],new i(this.stream).ue(r,a,s),h.data=e.i,l){case n.B:h.accumulator=a.x.Y(c.x),console.log("RETURNING X",h.accumulator.toString());break;case n.F:h.accumulator=a.y.Y(c.y),console.log("RETURNING Y",h.accumulator.toString());break;case n.X:h.accumulator=new t(Math.atan2(a.x.Y(c.x).C(),a.y.Y(c.y).C())).D(180).L(t.PI),console.log("RETURNING THETA",h.accumulator.toString())}if(this.stream.re().type===e.p&&this.stream.ie(),u.le=this.stream.re(),u.le.type!==e.A)throw new SyntaxError(`Expected measurement operator, found "${u.le.name}`);break;case e.$:if(this.debug&&console.log(u.le.value?"(":")",u.le,h.ce,r.we),u.le.value){if(h.data===e.p)throw new SyntaxError(`Unexpected token "${u.le.name}" at column ${u.le.position}`);h.ce++,h.data===e.i&&(this.debug&&console.log("*",u.le),h.stack.push({se:i.#u,value:h.accumulator})),h.accumulator=new t(0),h.stack.push({se:i.#c}),h.data=e.$}else{if(!o&&h.ce===r.we)throw new SyntaxError(`Mismatched bracket at column ${u.le.position}`);if(h.data!==e.i)throw new SyntaxError(`Unexpected bracket at column ${u.le.position}`);if(i.#f(h,i.#c),h.stack.pop(),h.data=e.i,o){u.he=!1;continue}h.ce--}break;case e.g:if(h.data===e.p)throw new SyntaxError(`Unexpected space-delimited value "${u.le.name}" at column ${u.le.position}`);if(!(u.le.name in s)&&!(u.le.name in r.unit))throw new ReferenceError(`Reference to undefined unit "${u.le.name}" at column ${u.le.position}.`);h.data===e.i&&(this.debug&&console.log("*",u.le),h.stack.push({se:i.#u,value:h.accumulator})),this.debug&&console.log("Unit",u.le),h.accumulator=s[u.le.name]??r.unit[u.le.name],h.data=e.i;break;case e.u:if(h.ce)throw new SyntaxError(`Unexpected delimiter "${u.le.name}" in expression at column ${u.le.position}.`);case e.p:if(h.ce||0===h.data){h.data===e.i&&(h.data=e.p);break}case e.R:if(h.ce>r.we)throw new SyntaxError(`Missing closing bracket(s) at end of segment (nesting depth = ${h.ce-r.we})`);u.he=!1;continue;default:throw new SyntaxError(`Unexpected token "${u.le.name}" at column ${u.le.position}`)}u.le=this.stream.ie()}return i.#f(h,i.#h),i.#f(h,0),h}ue(a,s,o){let c,l,h,u,w,p,f;if(c={le:this.stream.re(),he:!0,pe:!1,fe:!1,de:!1,rotate:!1,count:!1,me:{},Ee:!1},c.le.type===e.i?(c.count=c.le.value.C(),c.fe=!0,c.le=this.stream.ie()):c.count=1,c.rotate=new t(0),u=c.le.name,-1!==s.stack.indexOf(u))throw new ReferenceError(`Segment ${c.le.name} cannot call itself`);if(!(u in a.xe))throw new ReferenceError(`Reference to undefined section "${u}" at ${c.le.position}`);for(l=a.xe[u],c.le=this.stream.ie();!0===c.he&&c.le;){switch(c.le.type){case e.S:if(c.pe)throw new Error(`Encountered rotation operator, but segment "${u}" rotation is already specified (${c.rotate} degrees)`);this.stream.ie(),p=new i(this.stream).parse(a,0,o,!1,{x:s.x,y:s.y},n.X),c.rotate=p.accumulator,c.le=this.stream.re(),c.pe=!0;continue;case e.$:if(c.de){c.he=!1;continue}if(!c.le.value)throw new SyntaxError(`Unexpected token "${c.le.name}" at column ${c.le.position}`);for(c.le=this.stream.ie();!c.de;){switch(c.le.type){case e.$:if(c.le.value)throw new SyntaxError(`Unexpected token "${c.le.name}" at column ${c.le.position}`);c.de=!0;continue;case e.g:case e.S:case e.U:switch(c.Ee=!1,u=c.le.name,f=c.le.type,f){case e.g:if(a.xe[u])throw new ReferenceError(`Argument "${u}" is already defined as a segment`);break;case e.S:break;case e.U:if(c.fe)throw new ReferenceError("Execution count is already defined for this invocation")}if(this.stream.ae().type===e.p&&(c.le=this.stream.ie()),c.le=this.stream.ie(),c.le.type===e.R)throw new Error(`Unexpected end of segment at ${c.le.position}`);if(c.le.type!==e.O)throw new SyntaxError(`Expected assignment operator after argument name, but found "${c.le.name}"`);switch(c.le=this.stream.ie(),p=new i(this.stream).parse(a,0,o,!0,{x:s.x,y:s.y},{[e.g]:n.W,[e.S]:n.X,[e.U]:n.W}[f]),f){case e.g:c.me[u]=p.accumulator;break;case e.S:c.rotate=p.accumulator,c.pe=!0;break;case e.U:c.count=p.accumulator.C(),c.fe=!0}c.le=this.stream.re();continue;case e.u:if(c.Ee)throw new Error(`Unexpected delimiter at column ${c.le.position}`);c.Ee=!0;case e.p:break;case e.R:throw new Error(`Unexpected end of segment at ${c.le.position}`);default:throw new SyntaxError(`Unexpected token "${c.le.name}" at column ${c.le.position}`)}c.le=this.stream.ie()}break;case e.p:if(this.stream.ae().type===e.S)break;default:c.he=!1;continue}c.le=this.stream.ie()}if(c.count!==parseInt(c.count))throw new Error(`The execution count (${c.count}) for segment "${u}" must be an integer.`);if(c.count<1)throw new Error(`The execution count (${c.count}) for segment "${u}" can't be less than 1.`);for(w=1;w<=c.count;w++)h=new PathParser(new r(l)),h.parse(a,s,c.rotate,w,c.me),s.stack.pop();c.he=!1}}class a{constructor(e){this.stream=e}static ye(e,n=t.N){return e.H.map((e=>e[0].toString()+(e.length>1?" "+e.slice(1).join(","):""))).join(" ")}static#d(e,t,n,r,i){var a,s;return n=n.Y(e),r=r.Y(t),i=i.C()%360*Math.PI/180,a=Math.cos(i),s=Math.sin(i),Math.abs(a-s)<2*Number.EPSILON?s=a:Math.abs(a+s)<2*Number.EPSILON&&(a=s),Math.abs(a)<Number.EPSILON&&(a=0),Math.abs(s)<Number.EPSILON&&(s=0),{x:e.add(n.D(a)).Y(r.D(s)),y:t.add(r.D(a)).add(n.D(s))}}static#m(e,n,r,i){let s,o,c,l,h,u,w,p;if(c=n[0].toLowerCase(),l=n[0].toLowerCase()===n[0],s={x:l?new t(0):r.x,y:l?new t(0):r.y},r.pending)throw new SyntaxError(`Too few arguments for command ${n[0]}`);if(r.K)throw new SyntaxError(`Dangling fix operator after command ${n[0]}`);switch(c){case"a":o={x:n[6].value,y:n[7].value},i&&(o=a.#d(s.x,s.y,o.x,o.y,i)),n[6].fixed&&(o.x=l?n[6].value.Y(r.x):n[6].value),n[7].fixed&&(o.y=l?n[7].value.Y(r.y):n[7].value),n=[n[0],n[1].value,n[2].value,n[3].fixed?n[3].value:n[3].value.add(i),n[4].value,n[5].value,o.x,o.y];break;case"c":h={x:n[1].value,y:n[2].value},u={x:n[3].value,y:n[4].value},o={x:n[5].value,y:n[6].value},i&&(h=a.#d(s.x,s.y,h.x,h.y,i),u=a.#d(s.x,s.y,u.x,u.y,i),o=a.#d(s.x,s.y,o.x,o.y,i)),n[5].fixed&&(o.x=l?n[5].value.Y(r.x):n[5].value),n[6].fixed&&(o.y=l?n[6].value.Y(r.y):n[6].value),n=[n[0],n[1].fixed?l?n[1].value.Y(r.x):n[1].value:h.x,n[2].fixed?l?n[2].value.Y(r.y):n[2].value:h.y,n[3].fixed?l?n[3].value.Y(r.x):n[3].value:u.x,n[4].fixed?l?n[4].value.Y(r.y):n[4].value:u.y,o.x,o.y];break;case"s":case"q":h={x:n[1].value,y:n[2].value},o={x:n[3].value,y:n[4].value},i&&(h=a.#d(s.x,s.y,h.x,h.y,i),o=a.#d(s.x,s.y,o.x,o.y,i)),n[3].fixed&&(o.x=l?n[3].value.Y(r.x):n[3].value),n[4].fixed&&(o.y=l?n[4].value.Y(r.y):n[4].value),n=[n[0],h.x,h.y,o.x,o.y];break;case"l":case"h":case"v":o={x:"v"===c?new t(s.x):n[1].value,y:"h"===c?new t(s.y):"v"===c?n[1].value:n[2].value},i&&(o=a.#d(s.x,s.y,o.x,o.y,i)),p=180*Math.atan2(o.y.Y(s.y).C(),o.x.Y(s.x).C())/Math.PI,n[1].fixed&&("v"===c?o.y=l?n[1].value.Y(r.y):n[1].value:o.x=l?n[1].value.Y(r.x):n[1].value),"l"===c&&n[2].fixed&&(o.y=l?n[2].value.Y(r.y):n[2].value),(n=o.x.equals(s.x)?o.y.equals(s.y)?null:["v",o.y]:o.y.equals(s.y)?["h",o.x]:["l",o.x,o.y])&&(e.$e.path.ge&&r.H.length>0&&(w=r.H[r.H.length-1],w[0].toLowerCase()===n[0].toLowerCase()&&p===r.Z&&(l?(w.length>2&&(w[2]=w[2].add(n[2])),w[1]=w[1].add(n[1]),n=null):r.be.pop())),r.Z=p);break;case"m":case"t":o={x:n[1].value,y:n[2].value},i&&(o=a.#d(s.x,s.y,o.x,o.y,i)),n[1].fixed&&(o.x=l?n[1].value.Y(r.x):n[1].value),n[2].fixed&&(o.y=l?n[2].value.Y(r.y):n[2].value),n=[n[0],o.x,o.y],e.$e.path.ge&&"m"===c&&r.H.length>0&&(w=r.H[r.H.length-1],"m"===w[0].toLowerCase()&&(l?(w[1]=w[1].add(n[1]),w[2]=w[2].add(n[2]),n=null):r.be.pop()));break;case"z":n=["z"],r.x=new t(r.J),r.y=new t(r.ee),r.Z=null}"z"!==c&&(r.x=l?r.x.add(o.x):o.x,r.y=l?r.y.add(o.y):o.y),"m"===c&&(r.J=new t(r.x),r.ee=new t(r.y)),n&&(l||(n[0]=n[0].toUpperCase()),r.H.push(n))}Re(t,r=n.V(),a){let s;for(s={le:this.stream.re(),he:!0,index:0};s.he&&s.le&&s.index<a;){switch(s.le.type){case e.p:case e.u:break;case e.R:s.he=!1;break;default:let a=new i(this.stream).parse(t,0,[],!1,{x:r.x,y:r.y},n.W);r.H.push([a.accumulator]),r.index++,s.le=this.stream.re();continue}s.le=this.stream.ie()}return r}parse(r,s=n.V(),o=new t(0),c=1,l){let h,u,w,p;for(h={le:this.stream.re(),he:!0};h.he&&h.le;){switch(h.le.type){case e.o:if(null===s.j&&"m"!==h.le.name.toLowerCase())throw new SyntaxError("Paths must begin with a Move To command");u&&a.#m(r,u,s,o),s.j=h.le.value,s.pending=s.j.length,u=[h.le.name];break;case e._:s.K=!0;break;case e.p:case e.u:break;case e.R:u&&a.#m(r,u,s,o),h.he=!1;break;case e.g:case e.i:if(h.le.type===e.i?(p=this.stream.ae(),w=p.type===e.g&&r.xe[p.name]):w=r.xe[h.le.name],w){u&&(a.#m(r,u,s,o),u=null),new i(this.stream).ue(r,s,l),h.le=this.stream.re();continue}default:if(!u)throw new Error(`Expected command, but found "${h.le.name}"`);if(s.pending||(a.#m(r,u,s,o),s.pending=s.j.length,u=[u[0]]),!s.pending)throw new SyntaxError(`Too many parameters supplied to command "${u[0]}"`);if("a"===u[0].toLowerCase()&&(4===s.pending||3===s.pending)&&h.le.type===e.i&&h.le.name.length>1&&-1!==["0","1"].indexOf(h.le.name.substr(0,1)))u.push({fixed:s.K,value:new t(h.le.name.substr(0,1))}),h.le.name=h.le.name.substr(1),h.le.value=new t(h.le.name);else{let e=new i(this.stream).parse(r,0,l,!1,{x:s.x,y:s.y},s.j[s.j.length-s.pending]);u.push({fixed:s.K,value:e.accumulator})}s.K=!1,s.pending--,h.le=this.stream.re();continue}h.le=this.stream.ie()}return s}}class s{constructor(e){this.document=s.#E(e)}static#E(e){return(new("undefined"==typeof DOMParser?require("xmldom").DOMParser:DOMParser)).parseFromString(e,"text/xml")}#x(e,t){let a,s=[];for(;s.length||t.length;){s.length?a=s.pop():(a=t.shift(),a.parentNode.removeChild(a));let o=new i(new r(a.getAttribute("value")));try{let t=o.parse(e,1,{},!1,null,n.W),r=a.getAttribute("id");if(r in e.unit)throw new Error(`Duplicate unit ID: "${r}"`);e.unit[r]=t.accumulator}catch(e){if(!(e instanceof ReferenceError))throw new Error("Couldn't parse item, "+e.message,{Te:e});{if(1===s.filter((e=>e.getAttribute("id")===o.stream.re().name)).length)throw new ReferenceError(`Circular reference to "${o.stream.re().name}"`);s.push(a);let e=t.filter((e=>e.getAttribute("id")===o.stream.re().name));if(e.length>1)throw new ReferenceError(`Unable to resolve expression "${a.getAttribute("value")}". Duplicate ID "${o.stream.re().name}".`);if(0===e.length)throw new ReferenceError(`Unable to resolve expression "${a.getAttribute("value")}". "${o.stream.re().name}" is undefined.`);s.push(e[0]),e[0].parentNode.removeChild(e[0]),t=t.slice(0,t.indexOf(e[0])).concat(t.slice(t.indexOf(e[0])+1))}}}}#y(e,t){t.forEach((e=>e.parentNode.removeChild(e))),e.xe=t.reduce(((t,n)=>{let r=n.getAttribute("id");if(r in t)throw new Error(`Duplicate segment ID: "${r}"`);if(r in e.unit)throw new Error(`Segment ID: "${r}" already defined as a unit`);return t[n.getAttribute("id")]=n.getAttribute("d"),t}),{})}#g(e){let t,n=[];do{t=Array.from(this.document.getElementsByTagName("include")),t.forEach((t=>{let r=t.getAttribute("href");if(-1!==n.indexOf(r))throw new Error(`Circular include reference: ${r}`);n.push(r),r=r.split("#");let i=r[0],a=r.length>1?r.slice(1).join("#"):null;const o=require("fs").ke(e.oe+i,{encoding:"utf-8",ve:"r"});let c,l=s.#E(o);if(null!==a){if(c=l.getElementById(a),!c)throw new Error(`Failed to include file: ${i}, ID: ${a}`)}else if(c=l.documentElement,!c)throw new Error(`Failed to include file: ${i}`);if("svg"===c.nodeName.toLowerCase()){let e=c.firstChild;for(;e;){let n=e;e=e.nextSibling,t.parentNode.insertBefore(n,t)}}else t.parentNode.insertBefore(c,t);t.parentNode.removeChild(t)}))}while(t.length)}transform(e){let t={unit:{},we:1,$e:{path:{precision:e.precision,ge:e.Ie},Pe:{Se:"xml"===e.Se||"all"===e.Se,_e:e._e}}};this.#g(e),this.#x(t,Array.from(this.document.getElementsByTagName("unit")));for(let n in e.unit)t.unit[n]=e.unit[n];this.#y(t,Array.from(this.document.getElementsByTagName("segment")));let i=Array.from(this.document.getElementsByTagName("path"));for(t.we=0;i.length;){let e=i.shift(),n=new a(new r(e.getAttribute("d"))).parse(t);e.setAttribute("d",a.ye(n,t.$e.path.precision))}for(i=Array.from(this.document.getElementsByTagName("svg")),t.we=0;i.length;){let e=i.shift();if(e.hasAttribute("viewBox")){let i=new a(new r(e.getAttribute("viewBox"))).Re(t,n.V(),4);e.setAttribute("viewBox",a.ye(i,t.$e.path.precision))}}let s=[],o=this.document.documentElement.firstChild,c=8,l=3;for(;s.length||o;){o.firstChild&&s.push(o.firstChild);let e=o;o=o.nextSibling?o.nextSibling:s.pop(),t.$e.Pe.Se&&e.nodeType===l&&0===e.nodeValue.replace(new RegExp("\\s+","g"),"").length&&e.parentNode.removeChild(e),t.$e.Pe._e&&e.nodeType===c&&e.parentNode.removeChild(e)}return(new("undefined"==typeof XMLSerializer?require("xmldom").XMLSerializer:XMLSerializer)).serializeToString(this.document.documentElement)}}!function(){let e=process.argv.slice(2),t=!0,n=!0,r=["path","xml","all"],i={Se:null,_e:!1,Ie:!1,precision:3};for(;n&&t&&e[0].startsWith("--");)switch(e[0]){case"--precision":i.precision=parseInt(e[1]),i.precision.toString()!==e[1]||isNaN(i.precision)?(console.log("Invalid syntax for --precision switch"),t=!1):e=e.slice(2);break;case"--stripWhitespace":i.Se=e[1],-1===r.indexOf(i.Se)?(console.log("Invalid syntax for --stripWhitespace switch"),t=!1):e=e.slice(2);break;case"--stripComments":i._e=!0,e.shift();break;case"--combinePathCommands":i.Ie=!0,e.shift();break;case"--":e.shift();default:n=!1}if(!t||e.length<2)console.log('\nUsage: npm start -- [options] transform <source> <destination> [units...]\n\nsource       An unprocessed SVG file containing Pather commands\ndestination  Desired filename of the processed output\noptions      One or more of the following switches:\n  --precision <n>                   Write numbers to the output with N decimal places. Default is 3\n  --stripWhitespace <path|xml|all>  Strip whitespace from within path data, between XML tags or both (all)\n  --stripComments                   Strip XML comments from the output document\n  --combinePathCommands             Combine repeated commands in path data, e.g. h 30 h 30 becomes h 60\nunits        Variable values to be passed to the Pather environment\n             Name/value pairs separated by "=", e.g. myUnit=3 myOtherUnit=4.2\n');else{let t=e.shift(),r=e.shift();for(i.unit={},n=!0;n&&e.length;){let t,r=e.shift().split("=");switch(!0){case 2!==r.length:t=`Invalid unit format "${r.join("=")}".`;break;case null===new RegExp("^[bdefgijknopruwxy]|[a-z_$][a-z0-9_$]+$","i").exec(r[0]):t=`Invalid unit name "${r[0]}".`;break;case parseFloat(r[1]).toString()!==r[1].substr(0,parseFloat(r[1]).toString().length)||isNaN(parseFloat(r[1]))||parseFloat(r[1])===1/0||parseFloat(r[1])===-1/0:t=`Invalid unit value "${r[1]}".`}t?(console.log(`${t} Expected valid identifier followed by a number, e.g. myUnit=3`),n=!1):i.unit[r[0]]=parseFloat(r[1])}if(n){const e=require("fs"),n=require("path");i.oe=n.Ae(t)+n.Oe;const a=e.ke(t,{encoding:"utf-8",ve:"r"});let o=new s(a);e.Ue(r,o.transform(i),{encoding:"utf-8"})}}}()}));
//# sourceMappingURL=pather.min.js.map
